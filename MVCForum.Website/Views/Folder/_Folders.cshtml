@using System.Activities.Statements
@model MvcForum.Web.ViewModels.Folder.FolderViewModel

<div>
    @{
        var count = 1;
        if (Model.BreadCrumbTrail.Count() != count)
        {
            foreach (var breadCrumb in Model.BreadCrumbTrail)
            {
                var lastEntry = count == Model.BreadCrumbTrail.Count();
                if (!lastEntry)
                {

                    <a href=@breadCrumb.Url class="u-text-small u-text-theme-0">
                        @breadCrumb.Name &rsaquo;
                    </a>
                }
                else
                {
                    <a class="u-text-small u-text-theme-0">
                        @breadCrumb.Name
                    </a>
                }
                count++;
            }
        }
    }
    @if (Model.Folder != null)
    {
        <h2>@Model.Folder.FolderName</h2>

        <hr>

        <p>@Model.Folder.Description</p>

        @Html.ActionLink("Upload file", "Create", "GroupFile", new { folderId = Model.Folder.FolderId, slug = Model.Slug }, new { @class = "c-button c-button-outline" })

    }

    @if (Model.IsAdmin)
    {
        @Html.ActionLink("Add folder", "CreateFolder", new { slug = Model.Slug, parentId = Model.Folder?.FolderId, groupId = Model.GroupId } , new { @class = "c-button c-button--outline" });
        if (Model.Folder != null)
        {
            @Html.ActionLink("Edit folder", "UpdateFolder", new { slug = Model.Slug, folderId = Model.Folder?.FolderId }, new {@class = "c-button c-button--outline"});
            @Html.ActionLink("Delete folder", "DeleteFolder", new { slug = Model.Slug, folderId = Model.Folder?.FolderId }, new {@class = "c-button c-button--outline"});
        }
    }

    @if (Model.ChildFolders.Any())
    {

        <div class="c-grid-block">
            <div class="c-grid-block_item l-col-12">
                <div class="u-padding-top-spacing-2 u-padding-bottom-spacing-2 u-margin-bottom-spacing-5 u-bg-theme-1">
                    <table role="table" class="c-table c-table--files">
                        <caption class="c-table_caption u-visually-hidden">
                            Caption text title
                        </caption>
                        <thead role="rowgroup" class="c-table_head">
                            <tr role="row">
                                <th role="columnheader" class="c-table_th" scope="col">
                                    Name
                                </th>
                                <th role="columnheader" class="c-table_th" scope="col">
                                    Number of files
                                </th>
                            </tr>
                        </thead>
                        <tbody class="c-table_body">
                            @foreach (var folder in Model.ChildFolders)
                            {
                                <tr role="row" class="c-table_row">
                                    <td role="cell" class="c-table_cell">

                                        <span class="c-table_heading">Name </span>
                                        <a href="@Url.RouteUrl("GroupUrls", new {slug = Model.Slug, tab = Constants.GroupFilesTab, folder = folder.FolderId})" class="">
                                            @folder.FolderName
                                        </a>

                                    </td>
                                    <td role="cell" class="c-table_cell">

                                        <span class="c-table_heading">Number of files</span>
                                        <span>@folder.FileCount</span>

                                    </td>

                                </tr>
                            }
                        </tbody>

                    </table>
                </div>
            </div>
        </div>
    }
</div>




