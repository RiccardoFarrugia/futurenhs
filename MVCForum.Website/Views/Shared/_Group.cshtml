@using MvcForum.Core.ExtensionMethods
@using MvcForum.Web.Application.ExtensionMethods
@model MvcForum.Web.ViewModels.Group.GroupViewModel
@using MvcForum.Web.ViewModels.Shared

@if (!Model.Permissions[ForumConfiguration.Instance.PermissionDenyAccess].IsTicked)
{
    <div class="Grouprow">

        <h3 style="border-color: @(string.IsNullOrEmpty(Model.Group.Colour) ? "#ced1d1" : Model.Group.Colour)">
            <a href="@Model.Group.NiceUrl">@Html.Raw(Model.Group.Name)</a> <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
        </h3>
        @if (Model.ShowUnSubscribedLink)
        {
            <p>
                <a href="#" class="emailunsubscription" data-id="@Model.Group.Id" data-type="Group">
                    @{Html.RenderPartial("_SVGIcon", new SVGIconViewModel("icon-minus", "c-ui-icon c-ui-icon--large"));}
                    @Html.LanguageString("Notification.UnSubscribe")
                </a>
            </p>
        }
        else
        {
            <p>@Html.Raw(Model.Group.Description.ConvertPostContent())</p>
        }

        <div class="c-grid-block Grouprowfooter">
            <div class="c-grid-block_item l-col-6 l-col-2-d catdiscussions">
                @string.Format(Html.LanguageString("Rss.Group.Title"), Model.TopicCount)
            </div>
            <div class="c-grid-block_item l-col-6 l-col-2-d catcomments">
                @Model.PostCount @Html.LanguageString("Topic.CommentsDetails")
            </div>
            <div class="l-col-12 l-col-7-d catmostrecent">
                @if (Model.LatestTopic != null)
                {
                    <text>
                        @Html.LanguageString("Group.MostRecent") <a href="@Model.LatestTopic.NiceUrl">@Html.Raw(Model.LatestTopic.Name)</a>
                        @Html.Raw(string.Format(Html.LanguageString("Topic.StartedBy"),
                            DatesUi.GetPrettyDate(Model.LatestTopic.CreateDate.ToString()),
                            string.Format("<a href='{0}'>{1}</a>", Model.LatestTopic.User.NiceUrl, Model.LatestTopic.User.UserName)))
                    </text>
                }
            </div>
        </div>
    </div>
}